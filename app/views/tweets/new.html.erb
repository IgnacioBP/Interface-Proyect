<div class="d-flex align-items-center justify-content-center vh-100">
  <div class="container">    

    <h1 class="display-1" style="text-align: center; color: #599532; font-family: 'Open Sans', sans-serif; font-weight: 600;">Nuevo Quack</h1>

    <%= form_with model: @tweet, local: true, id: 'tweetForm' do |f| %>

      <div class="form-row d-flex justify-content-center">
        <div class="form-group col-4" style="margin-bottom: 20px;">
          <%= f.text_area :body, placeholder: 'Comparte tu estado', 
              class: 'form-control', 
              style: "border: 2px solid #000; border-radius: 20px;" %>
        </div>
      </div>

      <div class="form-row d-flex justify-content-center">
        <div class="form-group col-4">
          <%= f.text_area :hashtags, placeholder: 'Hashtags. Separa tus hashtags con comas. Ejemplo: lol, jaja, divertido', 
              class: 'form-control multi-line-placeholder', 
              style: "border: 2px solid #000; border-radius: 20px;" %>
        </div>
      </div>

      <div class="d-flex justify-content-center mt-3">
        <div class="mt-3" style="margin-right: 125px;">
          <%= link_to "Volver", root_path, 
            class: 'btn rounded-pill', 
            style: 'width: 150px; background-color: #ffde59; color: #000; border-radius: 50px; transition: background-color 0.3s ease;', 
            onmouseover: "this.style.backgroundColor='#e0c04e'; this.style.color='#fff';", 
            onmouseout: "this.style.backgroundColor='#ffde59'; this.style.color='#000';" 
          %>
        </div>

        <div class="actions mt-3">
          <%= f.submit "Publicar", 
            id: 'submitButton', 
            class: 'btn rounded-pill', 
            style: 'width: 150px; background-color: #82bb5d; color: #000; transition: background-color 0.3s ease;', 
            onmouseover: "this.style.backgroundColor='#6ca45f'; this.style.color='#fff';", 
            onmouseout: "this.style.backgroundColor='#82bb5d'; this.style.color='#000';" 
          %>
        </div>
      </div>

    <% end %>

    <script>
      document.addEventListener("DOMContentLoaded", function() {
        const form = document.getElementById("tweetForm");
        const submitButton = document.getElementById("submitButton");

        // Attach click event only to the submit button
        submitButton.addEventListener("click", function(event) {
          event.preventDefault();

          // Create a new audio element dynamically
          const audio = new Audio("/sounds/submit-sound.mp3");
          
          // Play the sound only when the button is pressed
          audio.play().then(() => {
            // Submit the form after a short delay to let the sound play
            setTimeout(function() {
              form.submit();
            }, 500); // Adjust the delay if needed
          }).catch((error) => {
            console.error("Error playing audio:", error);
            // If audio fails to play, submit the form immediately
            form.submit();
          });
        });
      });
    </script>

  </div>
</div>
