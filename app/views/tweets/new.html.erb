<div class="d-flex align-items-center justify-content-center vh-100">
  <div class="container">    

    <div class="card shadow-lg p-4" style="max-width: 800px; border-radius: 20px; background-color: #fff;">
      <div class="card-body text-center" style="background-color:#fff;">

        <h1 class="display-1" style="text-align: center; color: #599532; font-family: 'Open Sans', sans-serif; font-weight: 600;">Nuevo Quack</h1>

        <%= form_with model: @tweet, local: true, id: 'tweetForm' do |f| %>

          <div class="form-row d-flex justify-content-center">
            <div class="form-group col-4" style="margin-bottom: 20px;">
              <%= f.text_area :body, placeholder: 'Comparte tu estado', 
                  class: 'form-control', 
                  style: "border: 2px solid #000; border-radius: 20px;" %>
            </div>
          </div>

          <div class="form-row d-flex justify-content-center">
            <div class="form-group col-4">
              <%= f.text_area :hashtags, placeholder: 'Hashtags. Separa tus hashtags con comas. Ejemplo: lol, jaja, divertido', 
                  class: 'form-control multi-line-placeholder', 
                  style: "border: 2px solid #000; border-radius: 20px;" %>
            </div>
          </div>

          <div class="d-flex justify-content-center mt-3">
            <div class="mt-3" style="margin-right: 125px;">
              <%= link_to "Volver", root_path, 
                class: 'btn rounded-pill', 
                style: 'width: 150px; background-color: #ffde59; color: #000; border-radius: 50px; transition: background-color 0.3s ease;', 
                onmouseover: "this.style.backgroundColor='#e0c04e'; this.style.color='#fff';", 
                onmouseout: "this.style.backgroundColor='#ffde59'; this.style.color='#000';" 
              %>
            </div>

            <div class="actions mt-3">
              <%= f.submit "Publicar", 
                id: 'submitButton', 
                class: 'btn rounded-pill', 
                style: 'width: 150px; background-color: #82bb5d; color: #000; transition: background-color 0.3s ease;', 
                onmouseover: "this.style.backgroundColor='#6ca45f'; this.style.color='#fff';", 
                onmouseout: "this.style.backgroundColor='#82bb5d'; this.style.color='#000';" 
              %>
            </div>
          </div>

        <% end %>

      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener("click", function(event) {
  if (event.target && event.target.id === "submitButton") {
    event.preventDefault();
    console.log("HER EHERE HERE"); // Para verificar si se ejecuta

    const form = document.getElementById("tweetForm");
    const audio = new Audio("/sounds/submit-sound.mp3");

    audio.play().then(() => {
      setTimeout(function() {
        form.submit();
      }, 500);
    }).catch((error) => {
      console.error("Error al reproducir el audio:", error);
      form.submit();
    });
  }
});

</script>